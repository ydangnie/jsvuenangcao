<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lab 2 - JavaScript Nâng Cao</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            line-height: 1.6;
            background-color: #f9f9f9;
        }
        
        h2 {
            border-bottom: 2px solid #dc3545;
            padding-bottom: 5px;
            color: #dc3545;
        }
        
        h3.result {
            color: #007bff;
            font-family: 'Courier New', Courier, monospace;
            font-size: 1.2em;
            background: #e9ecef;
            padding: 10px;
            border-radius: 5px;
        }
        
        .exercise {
            background: #fff;
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .exercise label {
            display: inline-block;
            width: 60px;
            font-weight: bold;
        }
        
        input[type="text"],
        input[type="number"],
        input[type="email"] {
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            width: 250px;
        }
        
        button {
            padding: 8px 15px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-left: 5px;
        }
        
        button:hover {
            background-color: #0056b3;
        }
    </style>
</head>

<body>

    <h1>Tổng Hợp Lab 2 - Chuỗi và Regex</h1>

    <div class="exercise">
        <h2>Bài 1: Đếm ký tự</h2>
        <label>String</label>
        <input type="text" id="str-b1" value="FPTPoly">
        <button id="btn-b1">Count</button>
        <h3 id="result-b1" class="result"></h3>
    </div>

    <div class="exercise">
        <h2>Bài 2: Cắt chuỗi (Truncate)</h2>
        <div>
            <label>String</label>
            <input type="text" id="str-b2" value="FPTPoly">
        </div>
        <div>
            <label>Number</label>
            <input type="number" id="num-b2" value="3" style="width: 50px;">
        </div>
        <button id="btn-b2" style="margin-left: 65px;">Convert</button>
        <h3 id="result-b2" class="result"></h3>
    </div>

    <div class="exercise">
        <h2>Bài 3: Chuyển đổi sang camelCase</h2>
        <p>(Trong PDF là "Bài 4 (2 điểm)")</p>
        <label>String</label>
        <input type="text" id="str-b3" value="javascript .... /// nang,,, cao">
        <button id="btn-b3">Convert</button>
        <h3 id="result-b3" class="result"></h3>
    </div>

    <div class="exercise">
        <h2>Bài 4: Kiểm tra Email (Regex)</h2>
        <p>(Trong PDF là "Bài 4 (3 điểm)")</p>
        <label>Email</label>
        <input type="email" id="str-b4" value="nva@fpt.edu.vn">
        <button id="btn-b4">Check</button>
        <h3 id="result-b4" class="result"></h3>
    </div>
    <script>
        // --- BÀI 1: Đếm ký tự ---
        var str1 = document.querySelector("#str-b1");
        var btn1 = document.querySelector("#btn-b1");
        var res1 = document.querySelector("#result-b1");

        btn1.onclick = function() {
                // Lấy giá trị chuỗi
                var str = str1.value;
                // Hiển thị độ dài chuỗi [cite: 13]
                res1.innerText = str.length;
            }
            // Tự động chạy lần đầu
        btn1.onclick();


        // --- BÀI 2: Cắt chuỗi ---
        var str2 = document.querySelector("#str-b2");
        var num2 = document.querySelector("#num-b2");
        var btn2 = document.querySelector("#btn-b2");
        var res2 = document.querySelector("#result-b2");

        btn2.onclick = function() {
                var str = str2.value;
                var num = parseInt(num2.value); // Chuyển số từ input (string) sang number

                // Kiểm tra xem độ dài chuỗi có lớn hơn số đã nhập không
                if (str.length > num) {
                    // Cắt chuỗi từ 0 đến num, và thêm "..."
                    res2.innerText = str.substring(0, num) + "...";
                } else {
                    // Nếu không, hiển thị chuỗi gốc [cite: 23]
                    res2.innerText = str;
                }
            }
            // Tự động chạy lần đầu
        btn2.onclick();


        // --- BÀI 3: Chuyển đổi sang camelCase ---
        var str3 = document.querySelector("#str-b3");
        var btn3 = document.querySelector("#btn-b3");
        var res3 = document.querySelector("#result-b3");

        btn3.onclick = function() {
                var str = str3.value;

                // 1. Chuyển toàn bộ chuỗi về chữ thường
                var lowerCaseStr = str.toLowerCase();

                // 2. Dùng Regex
                // \W+ : Tìm 1 hoặc nhiều ký tự không phải chữ/số (như " ", ".", "/", ",")
                // (.)   : Bắt lấy 1 ký tự ĐỨNG NGAY SAU nó (đây là ký tự ta muốn viết hoa)
                // g     : Tìm tất cả các trường hợp
                var result = lowerCaseStr.replace(/\W+(.)/g, function(match, char) {
                    // char chính là ký tự trong dấu ngoặc (.), ta viết hoa nó lên
                    return char.toUpperCase();
                });

                res3.innerText = result;
            }
            // Tự động chạy lần đầu
        btn3.onclick();


        // --- BÀI 4: Kiểm tra Email (Regex) ---
        var str4 = document.querySelector("#str-b4");
        var btn4 = document.querySelector("#btn-b4");
        var res4 = document.querySelector("#result-b4");

        btn4.onclick = function() {
                var str = str4.value;

                // Xây dựng Regex dựa trên các điều kiện
                // ^[a-z]                : Bắt đầu bằng 1 ký tự a-z [cite: 61, 63]
                // [a-z0-9_\.]{4,31}     : Theo sau là 4-31 ký tự (để tổng là 5-32) [cite: 62-64]
                // @                     : Ký tự @
                // [a-z0-9]{2,}          : Tên miền (vd: fpt) [cite: 66]
                // (\.[a-z0-9]{2,4}){1,2}: Tên miền cấp 1 hoặc 2 (vd: .edu.vn) [cite: 66]
                // $                     : Kết thúc chuỗi
                // i                     : Không phân biệt hoa/thường
                const emailRegex = /^[a-z][a-z0-9_\.]{4,31}@[a-z0-9]{2,}(\.[a-z0-9]{2,4}){1,2}$/i;

                // Dùng hàm .test() để kiểm tra
                var isValid = emailRegex.test(str);

                // Hiển thị TRUE hoặc FALSE [cite: 58]
                res4.innerText = isValid ? "TRUE" : "FALSE";
                // Thêm màu sắc cho dễ nhìn
                res4.style.color = isValid ? "green" : "red";
            }
            // Tự động chạy lần đầu
        btn4.onclick();
    </script>

</body>

</html>