<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lab 1 - JavaScript Clean Code</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>

    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            line-height: 1.6;
        }
        
        h2 {
            border-bottom: 2px solid #007bff;
            color: #007bff;
            padding-bottom: 5px;
            margin-top: 30px;
        }
        
        input,
        select,
        button {
            padding: 5px;
            margin: 5px 0;
        }
        
        button {
            background: #007bff;
            color: white;
            border: none;
            cursor: pointer;
            padding: 8px 15px;
        }
        
        button:hover {
            background: #0056b3;
        }
        /* Bài 1 */
        
        #box-lab1 {
            width: 60px;
            height: 60px;
            background: #33691E;
            transition: 0.3s;
        }
        /* Bài 3 & 4 */
        
        .user-item {
            color: green;
            text-decoration: underline;
            list-style: disc;
            margin-left: 20px;
        }
        
        .form-group {
            margin-bottom: 10px;
        }
        
        .form-group label {
            display: inline-block;
            width: 60px;
            font-weight: bold;
        }
        /* Bài 5 & 6 */
        
        .date-box {
            background: #f9f9f9;
            padding: 15px;
            border: 1px solid #eee;
            width: fit-content;
        }
        
        .result-text {
            font-family: monospace;
            color: #d9534f;
            margin: 5px 0;
        }
    </style>
</head>

<body>
    <h1>Tổng Hợp Lab 1 - JavaScript Nâng Cao</h1>

    <h2>Bài 1: Sự kiện Mouseover & Mouseout</h2>
    <p>Di chuột vào khối vuông:</p>
    <div id="box-lab1"></div>

    <h2>Bài 2: Đồng bộ nội dung (DOM Value & InnerText)</h2>
    <input type="text" id="input-lab2" value="Nội dung ban đầu">
    <h3 id="text-lab2">Nội dung ban đầu</h3>

    <h2>Bài 3: Render danh sách từ mảng</h2>
    <ul id="list-lab3"></ul>

    <h2>Bài 4: Thêm phần tử vào mảng (Array Push)</h2>
    <div class="form-group">
        <div><label>ID:</label> <input type="number" id="inp-id" placeholder="Nhập ID"></div>
        <div><label>Name:</label> <input type="text" id="inp-name" placeholder="Nhập tên"></div>
        <div><label>Gender:</label>
            <select id="sel-gender">
                <option value="1">Male</option>
                <option value="2">Female</option>
            </select>
        </div>
        <button id="btn-add">Add User</button>
    </div>
    <ul id="list-lab4"></ul>

    <h2>Bài 5: Xử lý Date Object</h2>
    <div class="date-box">
        Date <input type="number" id="d5" value="1" style="width:40px"> Month <input type="number" id="m5" value="11" style="width:40px"> Year <input type="number" id="y5" value="2019" style="width:60px">
        <br>
        <button id="btn-convert5">Convert JS Date</button>
        <div id="result-lab5"></div>
    </div>

    <h2>Bài 6: Thư viện Moment.js</h2>
    <div class="date-box">
        Date <input type="number" id="d6" value="1" style="width:40px"> Month <input type="number" id="m6" value="11" style="width:40px"> Year <input type="number" id="y6" value="2019" style="width:60px">
        <br>
        <button id="btn-convert6">Convert Moment.js</button>
        <h3 class="result-text" id="result-lab6"></h3>
    </div>

    <script>
        // --- BÀI 1: Đổi màu nền ---
        const box = document.getElementById("box-lab1");

        box.onmouseover = () => box.style.background = "#BF360C"; // Màu cam đậm
        box.onmouseout = () => box.style.background = "#33691E"; // Màu xanh gốc


        // --- BÀI 2: Đồng bộ Input và H3 ---
        const inputLab2 = document.getElementById("input-lab2");
        const textLab2 = document.getElementById("text-lab2");

        inputLab2.onkeyup = () => textLab2.innerText = inputLab2.value;


        // --- DỮ LIỆU DÙNG CHUNG CHO BÀI 3 & 4 ---
        const users = [{
            id: 1,
            name: "James Smith",
            gender: 1
        }, {
            id: 2,
            name: "Isla Brown",
            gender: 2
        }, {
            id: 3,
            name: "Amelia Davies",
            gender: 2
        }, {
            id: 4,
            name: "Jacob Evans",
            gender: 1
        }];

        // Hàm render danh sách ra thẻ UL
        function renderList(targetId, dataArray) {
            const ul = document.getElementById(targetId);
            ul.innerHTML = ""; // Xóa nội dung cũ

            dataArray.forEach(user => {
                const li = document.createElement("li");
                li.className = "user-item";
                const genderText = (user.gender == 1) ? "Male" : "Female";

                li.innerText = `${user.id} - ${user.name} - ${genderText}`;
                ul.appendChild(li);
            });
        }

        // --- BÀI 3: Hiển thị danh sách tĩnh ---
        renderList("list-lab3", users);


        // --- BÀI 4: Thêm User mới ---
        // Copy mảng gốc sang mảng mới để thao tác riêng cho bài 4
        const usersLab4 = [...users];
        renderList("list-lab4", usersLab4); // Render lần đầu

        document.getElementById("btn-add").onclick = function() {
            const id = document.getElementById("inp-id").value;
            const name = document.getElementById("inp-name").value;
            const gender = document.getElementById("sel-gender").value;

            if (!id || !name) return alert("Vui lòng nhập đủ ID và Tên");

            // Thêm vào mảng và vẽ lại
            usersLab4.push({
                id: id,
                name: name,
                gender: gender
            });
            renderList("list-lab4", usersLab4);

            // Reset ô nhập liệu
            document.getElementById("inp-id").value = "";
            document.getElementById("inp-name").value = "";
        };


        // --- BÀI 5: Xử lý Date Native ---
        document.getElementById("btn-convert5").onclick = function() {
            const d = document.getElementById("d5").value;
            const m = document.getElementById("m5").value;
            const y = document.getElementById("y5").value;

            // Lưu ý: Tháng trong JS tính từ 0-11 nên phải trừ 1
            const dateObj = new Date(y, m - 1, d);

            // Helper để thêm số 0 phía trước (VD: 1 -> 01)
            const pad = (num) => String(num).padStart(2, '0');
            const dd = pad(dateObj.getDate());
            const mm = pad(dateObj.getMonth() + 1);
            const yyyy = dateObj.getFullYear();

            // Lấy tên tháng (ngắn và dài)
            const monShort = dateObj.toLocaleString('en-US', {
                month: 'short'
            }); // Nov
            const monLong = dateObj.toLocaleString('en-US', {
                month: 'long'
            }); // November

            // Hiển thị kết quả
            const results = [
                `${yyyy}-${mm}-${dd}`,
                `${dd}/${mm}/${yyyy}`,
                `${dd}.${mm}.${yyyy}`,
                `${dd}, ${monShort} ${yyyy}`,
                `${dd}, ${monLong} ${yyyy}`
            ];

            // Map từng kết quả ra thẻ h3
            const resultDiv = document.getElementById("result-lab5");
            resultDiv.innerHTML = results.map(r => `<h3 class="result-text">${r}</h3>`).join('');
        };


        // --- BÀI 6: Moment.js ---
        document.getElementById("btn-convert6").onclick = function() {
            const d = document.getElementById("d6").value;
            const m = document.getElementById("m6").value;
            const y = document.getElementById("y6").value;

            // Tạo chuỗi chuẩn ISO để moment parse chính xác
            const dateStr = `${y}-${m}-${d}`;
            const dayName = moment(dateStr, "YYYY-M-D").format("dddd"); // Lấy tên thứ

            document.getElementById("result-lab6").innerText = dayName;
        };
    </script>
</body>

</html>